<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniela Delgado">
<meta name="dcterms.date" content="2024-03-24">
<meta name="description" content="In this blog post, we explore why there are fewer women in the data science field thorugh readings and analyzations. We also reflect and contexualize on the women who spoke on their careers in the data science field.">

<title>Daniela’s CSCI 0451 Blog - Women in Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: white;
      }

      .quarto-title-block .quarto-title-banner {
        color: white;
background-image: url(../../img/landscape.png);
background-size: cover;
      }
</style>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Daniela’s CSCI 0451 Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Women in Data Science</h1>
                  <div>
        <div class="description">
          In this blog post, we explore why there are fewer women in the data science field thorugh readings and analyzations. We also reflect and contexualize on the women who spoke on their careers in the data science field.
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Daniela Delgado </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 24, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="abstract" class="level1">
<h1><strong>Abstract</strong></h1>
<ul>
<li>In this blog post, I explore why it is important to spotlight women in data science and analyze questions on why women are underrepresented in data science and STEM fields, why it is an issue, how it became an issue, and if there have been changes in representation since the 20th century. To answer these questions, I take information from some of the sections from the report “Solving the Equation: The Variables for Women’s Success in Engineering and Computing” written by Corbett and Hill (2015). Furthermore, I highlight a few women in STEM, specifically in data science, who came to talk at Middlebury College as part of the Middlebury Women in Data Science (WiDS) Conference and report their research. From these readings and the conference talks, my main takeaways are that women are limited in STEM fields based on the false ideas that society imposes on them and assumes of them, women in data science add to the creative and critical thinking skills needed to find solutions to world problems, and in order to increase female presence in STEM fields, we need to hold more spaces for women to see and hear the achievements of other women, such as this WiDS conference.</li>
</ul>
</section>
<section id="why-spotlight-women-in-data-science" class="level1">
<h1><strong>Why Spotlight Women in Data Science?</strong></h1>
<p>Why is it a problem that women are underrepresented in computing, math, and engineering? For whom is it a problem?</p>
<ul>
<li>It is a problem because of innovation. For example, problems that need solutions, such as climate change and water allocation, require the skills of computing, math and engineering fields. Having a smaller representation of women in the field limits the creative potential to solve these problems. Additionally, companies are also at a loss as, due to the gender biases, they often chose men to work for their company despite them scoring lower in math than some women. This places the company at a disadvantage as they are less globally competitive.</li>
<li>The problem is also for women as they are missing out on high-quality job opportunities with high pay. These jobs are also more flexible, which women would be missing out on. Additionally, it is a problem for women as the continual under-representation of women in these fields leads to a perpetual cycle of living in the harmful stereotypes and gender biases that women do not belong in the computing, math, and engineering fields because they do not see themselves in those jobs.</li>
</ul>
<p>How is the representation and status of women in computing today different from the 1950s and 1960s? What are some of the forces that brought on this change?</p>
<ul>
<li>Overall, the percent of women who are computing professionals was the same in 2013 as it was in the 1960s.</li>
<li>A few number of women began to earn engineering degrees in the late 1800s and early 1900s. By the 1950s, women made up about 1% of the students in engineering programs in universities. Throughout the 1950s and into the 60s, male colleges began to admit women to increase the number of female students in the programs. However, because of male-dominated fields and gender norms, engineering was still considered to be for males.</li>
<li>In computing, women were more represented in the 1950s than men. For example, during Word War II, women made up most of the computer programmers. However, in the 1960s and 70s, men began to dominate the field due to hiring practices favoring men and because they did more gaming on personal computers so men began to be more attracted to the computing field. Men did more gaming as it was linked to the “hobbyist” culture and game playing in arcades that was usually dominated by males. Moreover, as computing became a more popular field to learn in colleges and universities, the departments had to place strict requirements to allow entry into the field. These requirements were disproportionately disadvantageous to women as they had less experience with programming and math than their counterparts. For all of these reasons, women today are still as underrepresented in the computing field today as they were in the 1950s and 60s.</li>
</ul>
<p>Which of the barriers and unequal challenges described in the section “Why So Few?” can be eroded by events that spotlight the achievement of women in STEM? - A barrier that can be eroded by events spotlighting women’s achievements is the barrier of feeling isolated in the field, that is, lacking mentors to help women and feeling like the space is not safe to speak up. This can be eroded by seeing the achievements of women in STEM as they would show that it is possible to be valued and courageous as well as to know that there are other women that can substitute as their mentor and get advice from them and their story. This community of women in STEM fosters a supportive community where women can connect, learn from one another, and access mentorship opportunities to dismantle the feeling of isolation and lack of guidance. Additionally, another barrier faced is the gender stereotype that men are better than girls at math and physical sciences. This roadblock is detrimental to women’s representation in STEM fields as they feel less than and not as intelligent to pursue the fields in the first place. However, it can be destroyed by people seeing women succeeding in the STEM fields as it proves the gender stereotypes wrong. It illustrates that women are smart and do not fall short of men as can do anything they put their minds to. Seeing other women’s achievements allows women to chose to pursue STEM fields as they see themselves represented in that career path and realize that their gender does not limit their capabilities or potential for success. Moreover, with the accomplishments on display, women can combat the sexism found in these fields where women receive less challenging assignments, thus limiting their career advancements. This exhibit of women’s success in STEM can dismantle sexism in the department as it proves to department heads and women themselves that women can do impactful and vigorous work if given the challenge.</p>
</section>
<section id="lightning-talks" class="level1">
<h1><strong>Lightning Talks</strong></h1>
<p><strong>First Lightning Talk: Professor Amy Yuen: Is the United Nations Security Council a Democratic Institution?</strong></p>
<ul>
<li>For the first lighting talk, Professor Amy Yuen spoke about addressing the question: Is the United Nations security council a democratic institution? In her findings, she found that the security council is not equal in the way we believe because some people have veto power, while others do not. Specifically, out of 15 members in the council, only five hold the power to veto. To answer the question, she looked at meetings, presidential statements, etc. to see who engages with the council while also looking at what regions are in the council. A surprising finding, at least for me, was that Japan and Brazil have the top two longest sittings in the council. However, as the results came to show, the average line is more flat, illustrating the inclusivity and representation of states in the council. The results came to be that the UN security council is somewhat democratic, but it could be worse in terms of states.</li>
</ul>
<p><strong>Second Lightning Talk: Jessica L’Roe: Land Use in Conservation: Computational Linguistics Models for Mental Health</strong></p>
<ul>
<li>Dr.&nbsp;Jessica L’Roe, the second lightning round speaker, researches land use in conservation hotspots and livelihoods, and works with survey data, interview data, property data, land cover data, and more. During her presentation, she spoke on land registration in the Amazon Rainforest in Brazil. The problem she wanted to address was: does the environmental registrar discourage deforestation? To answer this question, she took data from registered property boundaries and found that people lied about where their property boundaries lie and often said they owned less land than they did. This highlights potential flaws in the current land registration system, which are a detriment in raising conservation efforts. Additionally, she also spoke on monitoring the change in tropical forest landscapes, specifically the land covered change in Uganda. Noticing more trees were being planted rather than food production increasing, she asked the question: who is planting these trees and why? She took data from surveys connected to field-mapped woodlot polygons where the woodlots are owned by non-local people. Professor L’Roe tied in this research to a related problem of: as competition for land increases what happens to local youth? To answer this related question, she took quantitative and qualitative surveys over periods of time and found that mothers would rather invest in education rather than land because it was a safer bet for the success and future of their children. Finally, in her presentation, she had an overarching theme that women make big and important contributions to data science and conservation with data. She also emphasized the importance of women role models in the field and how the lack of women in data science and STEM should not discourage women from taking part in it. I especially took away how she mentioned that anything can be data because I did not imagine data science could be taken to the work of land conservation.</li>
</ul>
<p><strong>Third Lightning Talk: Professor Laura Biester</strong></p>
<ul>
<li>For the final lightning talk, Professor Laura Biester spoke on her study on computational linguistics models for mental health. She needed to collect text data for mental health research, but it was a huge challenge due to privacy. Thus, she had to rely on using “self-reports.” In her work, she found that self-reports give hints on when the user was first diagnosed with depression, so she turned to Reddit to collect data files from 2006 to 2019 from people who self-reported. She collected statistics from users and then collected all of their posts from Reddit. In the end, she had about 20,500 diagnosed users and nine controls per user. After getting the data, she worked to normalize the models and classify it with a linear model. She found that model weights for pre-diagnosis models correspond more to symptoms while weights for all-encompassing models correspond more to mental health discussion. In her presentation, I learned that computational linguistics models can provide valuable insights into mental health trends, and there are always ways to get access to the data you need for your research.</li>
</ul>
</section>
<section id="keynote-presentation-by-dr.-sarah-m.-brown" class="level1">
<h1><strong>Keynote Presentation by Dr.&nbsp;Sarah M. Brown</strong></h1>
<ul>
<li>In the keynote presentation given by Dr.&nbsp;Sarah M. Brown, she started by talking about how data science skills can be found in unexpected places, which is true as proven by the professors who gave the three lightning talks. She also spoke on making machine learning more fair, which is something we have been analyzing and discussing in our Machine Learning 451 course at Middlebury College. For this, she mentioned thinking of machine learning as a sociotechnical system and growing our toolbox in data science. To grow the tool box, she spoke on three different projects she has worked on that gave her more tools to add into her toolbox. These three tools, which she calls keys, she explained during her talk and said they were helpful in solving problems in data science.</li>
<li>The first project she spoke on used the skill from 2004 which included using context to understand primary sources and importantly mentioned that data is a primary source. This project took place in 2012 that consisted of a patient and clinician seeing if the patient has PTSD, but instead of the clinician diagnosing, it would be the computer. There were scores to differentiate between the people who had PTSD and they were ranked on a scale. The key taken from this project was to understand the data’s context as it can enhance the accuracy and reliability of computational models. The second project’s skill is from her experience in 2009 where, within a given field, the same work can have different meanings in other fields. The key taken away is that disciplines are communities. The third project’s skill is tied to the second where everyone has different rules and ways of running things at the national, regional and chapter level. Thus, the key is to meet people where they are. With this third project, she needed a model to quantify fairness. She wanted to maximize what the feature says about the value variable and minimize the features with what is being fitted, in her research case it is accuracy compared to fairness.</li>
<li>She says data is biased because the world is biased, which is the reason biased models exist and why machine learning can be biased. She says choosing data to retrain data makes better data and, in order to solve these biases, creative thinking is a requirement. I really took away from these points as it is true that data is biased and it is those who are affected by the models, usually marginalized people, who want to work to fix the biased models.</li>
</ul>
</section>
<section id="conclusion-and-reflection" class="level1">
<h1><strong>Conclusion and Reflection</strong></h1>
<ul>
<li>From this blog post, I learned that women believe they cannot succeed in math-heavy fields, such as engineering and computing, because society falsely tells them they are not as intelligent as men when it comes to mathematics. I did not know there was such an extensive history behind the reasons the under representation exists in the first place, such as gaming being the reason men decided to take up computing and because of the head start on education men had in the 1800s. Learning about the different barriers deterring women from getting a degree in a STEM field made me reflect and become aware that these were also things I found myself telling myself in order to not pursue computer science as a major, and thoughts I find myself thinking of now at times. However, reading about why it is important for women to be represented and noting everything I and the world would be missing out on in regards to growth opportunities from women partaking in computing and learning about the important work women are doing in data science, it makes me proud of the work I am doing. Moreover, I also learned that all things can be data and data can be found anywhere. My biggest takeaway was the mention of bias in data and how that creates biased machines. I never thought that data was biased as data is science and science has proof behind it. However, after listening to Dr.&nbsp;Brown’s talk and connecting it to the discussions and readings we have done in class, I realized we do live in a biased world where we have to question and be skeptical of the way and the data was gathered and the methods used. This being said, I am interested in learning more on the collection of data and finding ways to make is as less biased as possible.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>